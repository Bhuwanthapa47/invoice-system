<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title>Admin Dashboard</title>
</head>
<body>
<div layout:fragment="content">
    <h2>Welcome to the Admin Dashboard üë®‚Äçüíº</h2>

    <!-- üìä Summary Cards -->
    <div style="display: flex; gap: 20px; margin-top: 20px; margin-bottom: 30px;">
        <div style="flex: 1; background-color: #f9f9f9; padding: 15px; border: 1px solid #ddd; border-radius: 8px;">
            <h4>Total Invoices</h4>
            <p style="font-size: 22px;" th:text="${invoiceCount}">0</p>
        </div>
        <div style="flex: 1; background-color: #f9f9f9; padding: 15px; border: 1px solid #ddd; border-radius: 8px;">
            <h4>Total Amount (‚Çπ)</h4>
            <p style="font-size: 22px;" th:text="|${#numbers.formatDecimal(totalAmount, 1, 'POINT', 2, 'NONE')}|">‚Çπ0.00</p>
        </div>
    </div>

    <!-- ‚ûï Create Invoice Button -->
    <div style="margin-bottom: 20px;">
        <a th:href="@{/invoices/create}"
           style="padding: 10px 15px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px;">
            ‚ûï Create New Invoice
        </a>
    </div>

    <!-- üìÑ View All Invoices Button -->
    <div style="margin-bottom: 30px;">
        <a th:href="@{/invoices}"
           style="padding: 10px 20px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px;">
            üìÑ View All Invoices
        </a>
    </div>

    <!-- üïí Recent Invoices -->
    <div>
        <h3>üïí Recent Invoices</h3>
        <table border="1" cellpadding="8" cellspacing="0" style="width: 100%;">
            <thead>
            <tr>
                <th>Invoice No</th>
                <th>Client</th>
                <th>Date</th>
                <th>Sub Total</th>
                <th>Total (with GST)</th>
                <th>Download</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="inv : ${recentInvoices}">
                <td th:text="${inv.invoiceNumber}">INV-001</td>
                <td th:text="${inv.clientName}">Client</td>
                <td th:text="${inv.invoiceDate}">2025-06-28</td>
                <td th:text="|${#numbers.formatDecimal(inv.subTotal, 1, 'POINT', 2, 'NONE')}|">1000.00</td>
                <td th:text="|${#numbers.formatDecimal(inv.totalAmount, 1, 'POINT', 2, 'NONE')}|">1180.00</td>
                <td>
                    <a th:href="@{'/invoices/' + ${inv.id} + '/download'}" target="_blank">üì• PDF</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
